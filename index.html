<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DARKLENS – Explorador de Personalidad</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.11.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    .hidden {
      display: none;
    }

    .analisis-loading {
      font-weight: bold;
      color: #888;
      margin-top: 10px;
    }

    .resultado-box {
      border: 2px solid #6c63ff;
      padding: 20px;
      border-radius: 10px;
      background-color: #f9f9ff;
      margin-top: 20px;
    }

    .emocion-bar {
      margin-bottom: 10px;
      background-color: #eee;
      border-radius: 5px;
      overflow: hidden;
      position: relative;
      height: 30px;
    }

    .emocion-bar-fill {
      background-color: #6c63ff;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
    }

    .emocion-bar-content {
      position: relative;
      z-index: 1;
      display: flex;
      justify-content: space-between;
      padding: 5px 10px;
      font-size: 0.95em;
    }
  </style>
</head>
<body>

  <!-- HERO -->
  <section class="hero">
    <img src="assets/futuristic_face.png" alt="Análisis facial futurista" class="hero-img">
  </section>

  <!-- BIENVENIDA -->
  <div class="container">
    <section class="bienvenida" id="seccion-bienvenida">
      <h1>DARKLENS</h1>
      <h2>Explorador de rasgos de personalidad oscura mediante test psicométrico y análisis de microexpresiones</h2>

      <div class="explicacion">
        <h3>¿En qué consiste esta experiencia?</h3>
        <p>
          DARKLENS es una herramienta experimental diseñada para explorar rasgos de personalidad oscura mediante la integración de dos enfoques complementarios: la evaluación psicométrica y el análisis automatizado de microexpresiones faciales. Esta experiencia forma parte de una investigación académica en el marco de la <strong>Licenciatura en Ciencia de Datos</strong> de la <strong>Universidad del Gran Rosario (UGR)</strong>.
        </p>
        <p>La participación es voluntaria, anónima y no implica ningún tipo de diagnóstico clínico. El objetivo es ofrecer una interpretación combinada de tu perfil psicométrico y emocional, basada en modelos de inteligencia artificial entrenados para este fin.</p>
        
        <h4>La experiencia consta de tres pasos:</h4>
        <ol>
          <li><strong>Test SD3:</strong> Completás un cuestionario validado de 27 ítems que evalúa maquiavelismo, narcisismo y psicopatía subclínica.</li>
          <li><strong>Análisis de microexpresiones:</strong> Subís una imagen facial que será procesada por un modelo entrenado para detectar emociones sutiles.</li>
          <li><strong>Interpretación combinada:</strong> Recibís un resumen integrador de tus resultados psicométricos y emocionales.</li>
        </ol>
        <p><em>Esta herramienta no reemplaza evaluaciones psicológicas profesionales. Los resultados deben interpretarse como una aproximación exploratoria dentro de un contexto académico.</em></p>
      </div>

      <form id="form-datos-basicos">
        <label>Nombre:</label>
        <input type="text" name="nombre" required>

        <label>Edad:</label>
        <input type="number" name="edad" min="18" max="100" required>

        <label>Género:</label>
        <select name="genero" required>
          <option value="">Seleccionar</option>
          <option value="Femenino">Femenino</option>
          <option value="Masculino">Masculino</option>
          <option value="No binario">No binario</option>
          <option value="Prefiero no decirlo">Prefiero no decirlo</option>
        </select>

        <label>País:</label>
        <input type="text" name="pais" required>

        <label class="checkbox-label">
          <input type="checkbox" name="consentimiento" required>
          <span>
            Acepto prestar mis datos personales, los resultados del test y mi imagen facial para participar voluntariamente en esta investigación académica. Entiendo que esta no es una evaluación clínica, y que la información recopilada será utilizada exclusivamente con fines de estudio, tratada de forma anónima y almacenada en una base de datos privada sin posibilidad de identificarme personalmente.
          </span>
        </label>

        <button type="submit">Entiendo y deseo continuar</button>
      </form>
    </section>

    <!-- TEST SD3 -->
    <section class="section hidden" id="seccion-test">
      <h3>Paso 1: Test SD3</h3>
      <p style="text-align: center; margin-bottom: 30px; color: #b0a0ff;">
        Indicá tu nivel de acuerdo con cada afirmación (1 = Fuertemente en desacuerdo, 5 = Fuertemente de acuerdo)
      </p>

      <form id="form-sd3"></form>

      <div id="resultado-sd3" class="hidden"></div>
      <div class="grafico-container hidden" id="grafico-container">
        <canvas id="grafico-sd3"></canvas>
      </div>
      <div id="narrativa-sd3" class="hidden"></div>

      <button id="btn-continuar-micro" class="hidden">Continuar al análisis facial</button>
    </section>

    <!-- MICROEXPRESIONES -->
    <section class="section hidden" id="seccion-micro">
      <h3>Paso 2: Análisis de Microexpresiones</h3>
      <p style="text-align: center; margin-bottom: 30px; color: #b0a0ff;">
        Tomá o subí una foto de tu rostro mirando a la cámara en un ambiente bien iluminado
      </p>

      <div class="camera-section">
        <video id="video" width="480" height="360" autoplay></video>
        <canvas id="canvas" width="480" height="360" class="hidden"></canvas>

        <div class="button-group">
          <button type="button" id="btn-activar-camara">Activar cámara</button>
          <button type="button" id="btn-tomar-foto" class="hidden">Capturar foto</button>
          <button type="button" id="btn-subir-imagen">Subir imagen</button>
        </div>
        <input type="file" id="input-imagen" accept="image/*">

        <button type="button" id="btn-analizar" class="hidden">Analizar microexpresiones</button>
      </div>

      <div id="resultado-micro" class="hidden"></div>
    </section>

    <!-- RESULTADO FINAL -->
    <section class="section hidden" id="seccion-final">
      <div class="resultado-final">
        <h3>Análisis Integrado Final</h3>
        <div id="contenido-final"></div>
      </div>
    </section>
  </div>

  <script src="script.js"></script>
</body>
</html>
